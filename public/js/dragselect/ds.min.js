!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).DragSelect=t()}(this,(function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e,t,r){return(c=l()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&a(i,r.prototype),i}).apply(null,arguments)}function u(e){var t="function"==typeof Map?new Map:void 0;return(u=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return c(e,arguments,s(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),a(n,e)})(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?d(e):t}function f(e){var t=l();return function(){var r,n=s(e);if(t){var i=s(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h(this,r)}}function v(e,t,r){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function S(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||p(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){if(e){if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var g=function(e,t,r){var n=e.x,i=e.y,o=r.x,s=r.y;return{"+":{x:n+o,y:i+s},"-":{x:n-o,y:i-s},"*":{x:n*o,y:i*s},"/":{x:n/o,y:i/s}}[t]},b=function(e){return{x:e.left,y:e.top}},y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{left:e.x,top:e.y,right:e.x,bottom:e.y,width:t,height:t}},_=function(){var e,t,r,n;return{y:(null===(e=document.body)||void 0===e?void 0:e.scrollTop)||(null===(t=document.documentElement)||void 0===t?void 0:t.scrollTop)||0,x:(null===(r=document.body)||void 0===r?void 0:r.scrollLeft)||(null===(n=document.documentElement)||void 0===n?void 0:n.scrollLeft)||0}},D=function(e){return!e||e instanceof Document?_():{x:e.scrollLeft>=0?e.scrollLeft:_().x,y:e.scrollTop>=0?e.scrollTop:_().y}},P=function(e){var t=e.elementRect,r=e.containerRect,n=e.tolerance,i=void 0===n?{x:0,y:0}:n,o=[];return t.top-i.y<r.top&&o.push("top"),t.left-i.x<r.left&&o.push("left"),t.bottom+i.y>r.bottom&&o.push("bottom"),t.right+i.y>r.right&&o.push("right"),o},w=function(e){var t={x:0,y:0},r=window.getComputedStyle(e);if(!r.transform||"none"===r.transform)return t;if(r.transform.indexOf("3d")>=0){var n=r.transform.trim().match(/matrix3d\((.*?)\)/);if(n&&n.length){var i,o=null===(i=n[1])||void 0===i?void 0:i.split(",");t.x=parseInt(o[12])||0,t.y=parseInt(o[13])||0}return t}var s=r.transform.trim().match(/matrix\((.*?)\)/);if(s&&s.length){var a,l=null===(a=s[1])||void 0===a?void 0:a.split(",");t.x=parseInt(l[4])||0,t.y=parseInt(l[5])||0}return t},k=function(e){var t=e.computedStyle,r=e.node,n=t.position;r instanceof HTMLDocument||"absolute"===n||"relative"===n||"fixed"===n||(r.style.position="relative")},E=function(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top},x=function(e){var t=e.element,r=e.posDirection,n=e.containerRect,i=e.useTransform,o=function(e,t){return t?function(e){var t=e.style.transform;if(!t||t.indexOf("translate")<0)return w(e);var r={x:0,y:0},n=t.trim().match(/translate[3dD]*?\(.*?\)/);if(n){var i,o=null===(i=n[0])||void 0===i?void 0:i.split("(");if(o){var s,a=null===(s=o[1])||void 0===s?void 0:s.split(",");r.x=parseInt(a[0])||0,r.y=parseInt(a[1])||0}}return r.x||r.x?r:w(e)}(e):function(e){var t=e.style,r={x:parseInt(t.left)||0,y:parseInt(t.top)||0};if(!r.x&&!r.x){var n=window.getComputedStyle(e);return{x:parseInt(n.left)||0,y:parseInt(n.top)||0}}return r}(e)}(t,i),s=g(o,"+",r);I(t,s,i);var a=t.getBoundingClientRect();!function(e){var t=e.element,r=e.edges,n=e.elementRect,i=e.containerRect,o=e.elementPos,s=e.useTransform;r.includes("top")&&I(t,{y:o.y+i.top-n.top,x:o.x},s),r.includes("left")&&I(t,{y:o.y,x:o.x+i.left-n.left},s),r.includes("bottom")&&I(t,{y:o.y+i.bottom-n.bottom,x:o.x},s),r.includes("right")&&I(t,{y:o.y,x:o.x+i.right-n.right},s)}({element:t,edges:P({elementRect:a,containerRect:n}),elementRect:a,containerRect:n,elementPos:s,useTransform:i})},I=function(e,t,r){if(r){var n=e.style.transform;e.style.transform="translate3d(".concat(t.x,"px,").concat(t.y,"px,1px) ").concat(n.replace(/translate.*?\)/g,""))}else e.style.left="".concat(t.x,"px"),e.style.top="".concat(t.y,"px");return e},A=function(e){for(var t=e.subscribe,r=e.publish,o=e.Interaction,s=e.SelectedSet,a=function(){var e=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}return r}}(e,t)||p(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(c[l],2),a=e[0],u=e[1];["pre",!1].forEach((function(e){return t(e?"".concat(a,":").concat(e):a,(function(t){return u.forEach((function(a){return(!a.condition||a.condition(t))&&r(e?"".concat(e).concat(a.name):a.name,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({items:s.elements,isDragging:o.isDragging},t))}))}))}))},l=0,c=Object.entries({"Selected:added":[{name:"elementselect"}],"Selected:removed":[{name:"elementunselect"}],"Area:scroll":[{name:"autoscroll"}],"Interaction:start":[{name:"dragstart"}],"Interaction:update":[{name:"dragmove",condition:function(e){return e.event}}],"Interaction:end":[{name:"callback"}]});l<c.length;l++)a()},C=function(e){return e?!Array.isArray(e)&&(e instanceof HTMLElement||e instanceof SVGElement)?[e]:S(e):[]},L=function(e,t){e.style.left="".concat(t.left,"px"),e.style.top="".concat(t.top,"px"),e.style.width="".concat(t.width,"px"),e.style.height="".concat(t.height,"px")},T=function(){function t(r){var i,o,s=this,a=r.area,l=r.PS,c=r.zoom;e(this,t),n(this,"_modificationCallback",void 0),n(this,"_modificationObserver",void 0),n(this,"_zoom",void 0),n(this,"_node",void 0),n(this,"_parentNodes",void 0),n(this,"_computedStyle",void 0),n(this,"_computedBorder",void 0),n(this,"_rect",void 0),n(this,"setArea",(function(e){s._node=e,k({computedStyle:s.computedStyle,node:s._node}),setTimeout((function(){s.PubSub.publish("Area:modified:pre",{item:s}),s.reset(),s.PubSub.publish("Area:modified",{item:s})}))})),n(this,"start",(function(){var e,t,r;e=s.parentNodes,t=s._modificationCallback,r=s._modificationObserver,window.addEventListener("resize",t),window.addEventListener("scroll",t),e.forEach((function(e,t){r.observe(e,{childList:0!==t,attributes:!0})}))})),n(this,"reset",(function(){s._computedStyle=void 0,s._rect=void 0,s._computedBorder=void 0,s._parentNodes=void 0})),n(this,"stop",(function(){var e,t;e=s._modificationObserver,t=s._modificationCallback,window.removeEventListener("resize",t),window.removeEventListener("scroll",t),e.disconnect(),s.reset()})),n(this,"scroll",(function(e,t){var r={scroll_directions:e,scroll_multiplier:t};s.PubSub.publish("Area:scroll:pre",r),function(e,t,r){if(t.length){var n=document&&document.documentElement&&document.documentElement.scrollTop&&document.documentElement,i=e instanceof HTMLDocument?n||document.body:e,o=t.includes("top")&&i.scrollTop>0,s=t.includes("bottom")&&i.scrollTop<i.scrollHeight,a=t.includes("left")&&i.scrollLeft>0,l=t.includes("right")&&i.scrollLeft<i.scrollWidth;o&&(i.scrollTop-=1*r),s&&(i.scrollTop+=1*r),a&&(i.scrollLeft-=1*r),l&&(i.scrollLeft+=1*r)}}(s._node,e,t),s.PubSub.publish("Area:scroll",r)})),this._zoom=c,this.PubSub=l,this.setArea(a),this._modificationCallback=(i=function(e){s.PubSub.publish("Area:modified:pre",{event:e,item:s}),s.reset(),s.PubSub.publish("Area:modified",{event:e,item:s})},60,function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=function(){o=null,i.apply(void 0,t)};clearTimeout(o),o=setTimeout(n,60)}),this._modificationObserver=new MutationObserver(this._modificationCallback),this.PubSub.subscribe("Interaction:init",this.start),this.PubSub.subscribe("Interaction:end",this.reset)}return r(t,[{key:"HTMLNode",get:function(){return this._node}},{key:"computedBorder",get:function(){return this._computedBorder?this._computedBorder:{top:parseInt(this.computedStyle.borderTopWidth),bottom:parseInt(this.computedStyle.borderBottomWidth),left:parseInt(this.computedStyle.borderLeftWidth),right:parseInt(this.computedStyle.borderRightWidth)}}},{key:"computedStyle",get:function(){return this._computedStyle?this._computedStyle:this.HTMLNode instanceof HTMLDocument?this._computedStyle=window.getComputedStyle(this.HTMLNode.body||this.HTMLNode.documentElement):this._computedStyle=window.getComputedStyle(this.HTMLNode)}},{key:"rect",get:function(){return this._rect?this._rect:this._rect=function(e,t){if(e instanceof Document)return{top:0,left:0,bottom:0,right:0,width:window.innerWidth,height:window.innerHeight};var r=e.getBoundingClientRect();return{top:r.top,left:r.left,bottom:r.bottom,right:r.right,width:(e.clientWidth||r.width)*t,height:(e.clientHeight||r.height)*t}}(this.HTMLNode,this._zoom)}},{key:"parentNodes",get:function(){return this._parentNodes||(this._parentNodes=function e(t){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=null===(r=t[n])||void 0===r?void 0:r.parentNode;return i?(t.push(i),e(t,++n)):t}([this.HTMLNode])),this._parentNodes}}]),t}(),V=function(){function t(r){var i=this,o=r.DS,s=r.dragKeys,a=r.draggability,l=r.keyboardDrag,c=r.keyboardDragSpeed,u=r.useTransform,d=r.zoom;e(this,t),n(this,"_useTransform",void 0),n(this,"_prevCursorPos",void 0),n(this,"_prevScrollPos",void 0),n(this,"_elements",[]),n(this,"_draggability",void 0),n(this,"_dragKeys",void 0),n(this,"_dragKeysFlat",void 0),n(this,"_keyboardDrag",void 0),n(this,"_keyboardDragSpeed",void 0),n(this,"_zoom",void 0),n(this,"keyboardDrag",(function(e){var t=e.event,r=e.key;if(i._keyboardDrag&&i._dragKeysFlat.includes(r)&&i.DS.SelectedSet.size&&i._draggability&&!i.DS.continue){var n={event:t,isDragging:!0,isDraggingKeyboard:!0};i.DS.publish(["Interaction:start:pre","Interaction:start"],n),i._elements=i.DS.getSelection(),i.handleZIndex(!0);var o=function(e){var t=e.shiftKey,r=e.keyboardDragSpeed,n=e.zoom,i=e.key,o=e.dragKeys,s=e.scrollDiff,a=e.canScroll,l=e.scrollCallback,c={x:0,y:0},u=t?4*r*n:r*n;return o.left.includes(i)&&(c.x=s.x||-u,t||s.x||!a||l(["left"],r)),o.right.includes(i)&&(c.x=s.x||u,t||s.x||!a||l(["right"],r)),o.up.includes(i)&&(c.y=s.y||-u,t||s.y||!a||l(["top"],r)),o.down.includes(i)&&(c.y=s.y||u,t||s.y||!a||l(["bottom"],r)),c}({shiftKey:i.DS.stores.KeyStore.currentValues.includes("shift"),keyboardDragSpeed:i._keyboardDragSpeed,zoom:i._zoom,key:r,scrollCallback:i.DS.Area.scroll,scrollDiff:i._scrollDiff,canScroll:i.DS.stores.ScrollStore.canScroll,dragKeys:i._dragKeys});i._elements.forEach((function(e){return x({element:e,posDirection:o,containerRect:i.DS.SelectorArea.rect,useTransform:i._useTransform})})),i.DS.publish(["Interaction:update:pre","Interaction:update"],n)}})),n(this,"keyboardEnd",(function(e){var t=e.event,r=e.key;if(i._keyboardDrag&&i._dragKeysFlat.includes(r)&&i.DS.SelectedSet.size&&i._draggability){var n={event:t,isDragging:i._draggability,isDraggingKeyboard:!0};i.DS.publish(["Interaction:end:pre","Interaction:end"],n)}})),n(this,"start",(function(e){var t=e.isDragging,r=e.isDraggingKeyboard;t&&!r&&(i._prevCursorPos=null,i._prevScrollPos=null,i._elements=i.DS.getSelection(),i.handleZIndex(!0))})),n(this,"stop",(function(e){null!=e&&e.isKeyboard||(i._prevCursorPos=null,i._prevScrollPos=null,i.handleZIndex(!1),i._elements=[])})),n(this,"update",(function(e){var t=e.isDragging,r=e.isDraggingKeyboard;if(t&&i._elements.length&&!r&&!i.DS.continue){var n=g(i._cursorDiff,"+",i._scrollDiff);i._elements.forEach((function(e){return x({element:e,posDirection:n,containerRect:i.DS.SelectorArea.rect,useTransform:i._useTransform})}))}})),n(this,"handleZIndex",(function(e){i._elements.forEach((function(t){return t.style.zIndex="".concat((parseInt(t.style.zIndex)||0)+e?9999:-9998)}))})),this.DS=o,this._useTransform=u,this._keyboardDragSpeed=c,this._keyboardDrag=l,this._zoom=d,this._draggability=a,this._dragKeys={up:s.up.map((function(e){return e.toLowerCase()})),down:s.down.map((function(e){return e.toLowerCase()})),left:s.left.map((function(e){return e.toLowerCase()})),right:s.right.map((function(e){return e.toLowerCase()}))},this._dragKeysFlat=[].concat(S(this._dragKeys.up),S(this._dragKeys.down),S(this._dragKeys.left),S(this._dragKeys.right)),this.DS.subscribe("Interaction:start",this.start),this.DS.subscribe("Interaction:end",this.stop),this.DS.subscribe("Interaction:update",this.update),this.DS.subscribe("KeyStore:down",this.keyboardDrag),this.DS.subscribe("KeyStore:up",this.keyboardEnd)}return r(t,[{key:"_cursorDiff",get:function(){var e=this.DS.stores.PointerStore.currentVal,t=this._prevCursorPos?g(e,"-",this._prevCursorPos):{x:0,y:0};return this._prevCursorPos=e,t}},{key:"_scrollDiff",get:function(){var e=this.DS.stores.ScrollStore.currentVal,t=this._prevScrollPos?g(e,"-",this._prevScrollPos):{x:0,y:0};return this._prevScrollPos=e,t}}]),t}(),N=function(){function t(r){var i=this,o=r.areaElement,s=r.DS,a=r.draggability,l=r.immediateDrag;e(this,t),n(this,"_areaElement",void 0),n(this,"_draggability",void 0),n(this,"_immediateDrag",void 0),n(this,"isInteracting",void 0),n(this,"isDragging",void 0),n(this,"init",(function(){return i.DS.publish("Interaction:init:pre",{})})),n(this,"_init",(function(){i.stop(),i._areaElement.addEventListener("mousedown",i.start),i._areaElement.addEventListener("touchstart",i.start,{passive:!1}),i.DS.publish("Interaction:init",{})})),n(this,"start",(function(e){return i.DS.publish("Interaction:start:pre",{event:e,isDragging:i.isDragging})})),n(this,"_start",(function(e){"touchstart"===e.type&&e.preventDefault(),i._canInteract(e)&&(i.isInteracting=!0,i.isDragging=i.isDragEvent(e),i.DS.publish("Interaction:start",{event:e,isDragging:i.isDragging}),document.addEventListener("mouseup",i.reset),document.addEventListener("touchend",i.reset))})),n(this,"isDragEvent",(function(e){return!(!i._draggability||i.DS.stores.KeyStore.isMultiSelectKeyPressed(e)||!i.DS.SelectableSet.has(e.target)||(i._immediateDrag&&(i.DS.SelectedSet.size?i.DS.SelectedSet.has(e.target)||(i.DS.SelectedSet.clear(),i.DS.SelectedSet.add(e.target)):i.DS.SelectedSet.add(e.target)),!i.DS.SelectedSet.has(e.target)))})),n(this,"onClick",(function(e){var t=e.event;if(i._canInteract(t)&&!(t.detail>0)){var r=i.DS,n=r.stores,o=n.PointerStore,s=n.KeyStore,a=r.SelectableSet,l=r.SelectedSet;o.start(t);var c=t.target;a.has(c)&&(s.isMultiSelectKeyPressed(t)||l.clear(),l.toggle(c),i.reset())}})),n(this,"stop",(function(){i.isInteracting=!1,i.isDragging=!1,i._areaElement.removeEventListener("mousedown",i.start),i._areaElement.removeEventListener("touchstart",i.start,{passive:!1}),document.removeEventListener("mouseup",i.reset),document.removeEventListener("touchend",i.reset)})),n(this,"update",(function(e){var t=e.event,r=e.scroll_directions,n=e.scroll_multiplier;i.isInteracting&&i.DS.publish(["Interaction:update:pre","Interaction:update"],{event:t,scroll_directions:r,scroll_multiplier:n,isDragging:i.isDragging})})),n(this,"reset",(function(e){return i.DS.publish("Interaction:end:pre",{event:e,isDragging:i.isDragging})})),n(this,"_reset",(function(e){var t=i.isDragging;i.stop(),i.init(),i.DS.publish("Interaction:end",{event:e,isDragging:t})})),this._areaElement=o,this._draggability=a,this._immediateDrag=l,this.DS=s,this.DS.subscribe("PointerStore:updated",this.update),this.DS.subscribe("Selectable:click",this.onClick),this.DS.subscribe("Selectable:pointer",(function(e){var t=e.event;return i.start(t)})),this.DS.subscribe("Interaction:start:pre",(function(e){var t=e.event;return i._start(t)})),this.DS.subscribe("Interaction:init:pre",this._init),this.DS.subscribe("Interaction:end:pre",(function(e){var t=e.event;return i._reset(t)})),this.DS.subscribe("Area:scroll",this.update)}return r(t,[{key:"_canInteract",value:function(e){var t=0===e.clientX&&0===e.clientY&&0===e.detail&&e.target;return!(2===e.button||this.isInteracting||e.target&&!this.DS.SelectorArea.isInside(e.target)||!t&&!this.DS.SelectorArea.isClicked(e))}}]),t}(),M=function t(r){var i=this,o=r.DS;e(this,t),n(this,"subscribers",{}),n(this,"subscribe",(function(e,t){return Array.isArray(i.subscribers[e])||(i.subscribers[e]=[]),i.subscribers[e].push(t),i.subscribers[e].length-1})),n(this,"unsubscribe",(function(e,t,r){r>=0?i.subscribers[e].splice(r,1):t&&(i.subscribers[e]=i.subscribers[e].filter((function(e){return e!==t})))})),n(this,"publish",(function(e,t){Array.isArray(e)?e.forEach((function(e){return i._publish(e,t)})):i._publish(e,t)})),n(this,"_publish",(function(e,t){var r=i.subscribers[e];Array.isArray(r)&&(e.includes(":pre")?i._handlePrePublish(r,t):i._handlePublish(r,t))})),n(this,"_handlePublish",(function(e,t){for(var r=0,n=e.length;r<n;r++){if(i.DS.stopped)return;e[r](t)}})),n(this,"_handlePrePublish",(function(e,t){for(var r=e.length;r--;){if(i.DS.stopped)return;e[r](t)}})),this.DS=o},K=function(t){o(a,t);var i=f(a);function a(t){var r,o=t.elements,s=t.className,l=t.hoverClassName,c=t.draggability,u=t.useTransform,h=t.DS;return e(this,a),n(d(r=i.call(this)),"_initElements",void 0),n(d(r),"_className",void 0),n(d(r),"_hoverClassName",void 0),n(d(r),"_useTransform",void 0),n(d(r),"_draggability",void 0),n(d(r),"init",(function(){return r._initElements.forEach((function(e){return r.add(e)}))})),n(d(r),"clear",(function(){return r.forEach((function(e){return r.delete(e)}))})),n(d(r),"_onClick",(function(e){return r.DS.publish(["Selectable:click:pre","Selectable:click"],{event:e})})),n(d(r),"_onPointer",(function(e){return r.DS.publish(["Selectable:pointer:pre","Selectable:pointer"],{event:e})})),n(d(r),"addAll",(function(e){return e.forEach((function(e){return r.add(e)}))})),n(d(r),"deleteAll",(function(e){return e.forEach((function(e){return r.delete(e)}))})),r.DS=h,r._initElements=C(o),r._className=s,r._hoverClassName=l,r._useTransform=u,r._draggability=c,r.DS.subscribe("Interaction:init",r.init),r}return r(a,[{key:"add",value:function(e){return e.classList.add(this._className),e.addEventListener("click",this._onClick),e.addEventListener("mousedown",this._onPointer),e.addEventListener("touchstart",this._onPointer,{passive:!1}),this._draggability&&!this._useTransform&&k({computedStyle:window.getComputedStyle(e),node:e}),v(s(a.prototype),"add",this).call(this,e)}},{key:"delete",value:function(e){return e.classList.remove(this._className),e.classList.remove(this._hoverClassName),e.removeEventListener("click",this._onClick),e.removeEventListener("mousedown",this._onPointer),e.removeEventListener("touchstart",this._onPointer,{passive:!1}),v(s(a.prototype),"delete",this).call(this,e)}},{key:"elements",get:function(){return Array.from(this.values())}}]),a}(u(Set)),O=function(t){o(a,t);var i=f(a);function a(t){var r,o=t.className,s=t.DS;return e(this,a),n(d(r=i.call(this)),"_className",void 0),n(d(r),"clear",(function(){return r.forEach((function(e){return r.delete(e)}))})),n(d(r),"addAll",(function(e){return e.forEach((function(e){return r.add(e)}))})),n(d(r),"deleteAll",(function(e){return e.forEach((function(e){return r.delete(e)}))})),r.DS=s,r._className=o,r}return r(a,[{key:"add",value:function(e){if(!v(s(a.prototype),"has",this).call(this,e)){var t={items:this.elements,item:e};return this.DS.publish("Selected:added:pre",t),v(s(a.prototype),"add",this).call(this,e),e.classList.add(this._className),e.style.zIndex="".concat((parseInt(e.style.zIndex)||0)+1),this.DS.publish("Selected:added",t),this}}},{key:"delete",value:function(e){if(v(s(a.prototype),"has",this).call(this,e)){var t={items:this.elements,item:e};this.DS.publish("Selected:removed:pre",t);var r=v(s(a.prototype),"delete",this).call(this,e);return e.classList.remove(this._className),e.style.zIndex="".concat((parseInt(e.style.zIndex)||0)-1),this.DS.publish("Selected:removed",t),r}}},{key:"toggle",value:function(e){return this.has(e)?this.delete(e):this.add(e),e}},{key:"elements",get:function(){return Array.from(this.values())}}]),a}(u(Set)),j=function(){function t(r){var i=this,o=r.DS,s=r.hoverClassName,a=r.multiSelectToggling;e(this,t),n(this,"_prevSelectedSet",void 0),n(this,"_hoverClassName",void 0),n(this,"_multiSelectToggling",void 0),n(this,"start",(function(e){var t=e.event;e.isDragging||(i._storePrevious(t),i._handleInsideSelection(!0,t))})),n(this,"update",(function(e){e.isDragging||i.DS.continue||i._handleInsideSelection()})),n(this,"_handleInsideSelection",(function(e,t){for(var r=i.DS,n=r.SelectableSet,o=r.SelectorArea,s=r.Selector,a=n.elements.map((function(e){return[e,e.getBoundingClientRect()]})),l=[],c=[],u=0,d=a.length;u<d;u++)o.isInside(a[u][0],a[u][1])&&(E(a[u][1],s.rect)?l.push(a[u][0]):c.push(a[u][0]));var h=i.DS.stores.KeyStore.isMultiSelectKeyPressed(t)&&i._multiSelectToggling;i.DS.continue||(l.forEach((function(t){return function(e){var t=e.element,r=e.force,n=e.multiSelectionToggle,i=e.SelectedSet,o=e.hoverClassName;t.classList.contains(o)&&!r||(i.has(t)?n&&i.delete(t):i.add(t),t.classList.add(o))}({element:t,force:e,multiSelectionToggle:h,SelectedSet:i.DS.SelectedSet,hoverClassName:i._hoverClassName})})),c.forEach((function(t){return function(e){var t=e.element,r=e.force,n=e.SelectedSet,i=e.PrevSelectedSet,o=e.hoverClassName;if(!t.classList.contains(o)&&!r)return!1;var s=n.has(t),a=i.has(t);s&&!a?n.delete(t):!s&&a&&n.add(t),t.classList.remove(o)}({element:t,force:e,SelectedSet:i.DS.SelectedSet,hoverClassName:i._hoverClassName,PrevSelectedSet:i._prevSelectedSet})})))})),this._hoverClassName=s,this._multiSelectToggling=a,this.DS=o,this.DS.subscribe("Interaction:start",this.start),this.DS.subscribe("Interaction:update",this.update)}return r(t,[{key:"_storePrevious",value:function(e){var t=this.DS,r=t.stores.KeyStore,n=t.SelectedSet;r.isMultiSelectKeyPressed(e)?this._prevSelectedSet=new Set(n):this._prevSelectedSet=new Set}}]),t}(),z=function(){function t(r){var i=this,o=r.DS,s=r.selector,a=r.selectorClass,l=r.customStyles;e(this,t),n(this,"_rect",void 0),n(this,"start",(function(e){if(!e.isDragging){var t=i.DS.stores.PointerStore.initialValArea;L(i.HTMLNode,y(t,1)),i.HTMLNode.style.display="block",i._rect=null}})),n(this,"stop",(function(){i.HTMLNode.style.width="0",i.HTMLNode.style.height="0",i.HTMLNode.style.display="none"})),n(this,"update",(function(e){if(!e.isDragging&&!i.DS.continue){var t=i.DS.stores,r=t.ScrollStore,n=t.PointerStore,o=function(e){var t=e.scrollAmount,r=e.initialPointerPos,n=e.pointerPos,i={};return n.x>r.x-t.x?(i.left=r.x-t.x,i.width=n.x-r.x+t.x):(i.left=n.x,i.width=r.x-n.x-t.x),n.y>r.y-t.y?(i.top=r.y-t.y,i.height=n.y-r.y+t.y):(i.top=n.y,i.height=r.y-n.y-t.y),i}({scrollAmount:r.scrollAmount,initialPointerPos:n.initialValArea,pointerPos:n.currentValArea});L(i.HTMLNode,o),i._rect=null}})),this.DS=o,this.HTMLNode=s||function(e){var t=document.createElement("div");return t.style.position="absolute",e||(t.style.background="rgba(0, 0, 255, 0.1)",t.style.border="1px solid rgba(0, 0, 255, 0.45)",t.style.display="none",t.style.pointerEvents="none"),t}(l),this.HTMLNode.classList.add(a),this.DS.subscribe("Interaction:start",this.start),this.DS.subscribe("Interaction:update",this.update),this.DS.subscribe("Interaction:end",this.stop)}return r(t,[{key:"rect",get:function(){return this._rect?this._rect:this._rect=this.HTMLNode.getBoundingClientRect()}}]),t}(),H=function(){function t(r){var i=this,o=r.DS,s=r.selectorAreaClass,a=r.autoScrollSpeed,l=r.overflowTolerance;e(this,t),n(this,"_autoScrollSpeed",void 0),n(this,"_scrollInterval",void 0),n(this,"_rect",void 0),n(this,"currentEdges",[]),n(this,"_overflowTolerance",void 0),n(this,"start",(function(){return i.applyElements("append")})),n(this,"applyElements",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"append",t=document.body?"body":"documentElement",r="".concat(e,"Child");i.HTMLNode[r](i.DS.Selector.HTMLNode),document[t][r](i.HTMLNode)})),n(this,"updatePos",(function(){i._rect=null;var e=i.DS.Area.rect,t=i.DS.Area.computedBorder,r=i.HTMLNode.style,n="".concat(e.top+t.top,"px"),o="".concat(e.left+t.left,"px"),s="".concat(e.width,"px"),a="".concat(e.height,"px");r.top!==n&&(r.top=n),r.left!==o&&(r.left=o),r.width!==s&&(r.width=s),r.height!==a&&(r.height=a)})),n(this,"stop",(function(e){i.stopAutoScroll(),e&&i.applyElements("remove")})),n(this,"startAutoScroll",(function(){i.currentEdges=[],i._scrollInterval=setInterval((function(){return i.handleAutoScroll()}),16)})),n(this,"handleAutoScroll",(function(){if(!i.DS.continue){var e=i.DS,t=e.stores.PointerStore,r=e.Area;i.currentEdges=P({elementRect:y(t.currentVal),containerRect:i.rect,tolerance:i._overflowTolerance}),i.currentEdges.length&&r.scroll(i.currentEdges,i._autoScrollSpeed)}})),n(this,"stopAutoScroll",(function(){i.currentEdges=[],clearInterval(i._scrollInterval)})),n(this,"isInside",(function(e,t){return!(!i.DS.Area.HTMLNode.contains(e)||!i.DS.stores.ScrollStore.canScroll)||E(i.rect,t||e.getBoundingClientRect())})),this._autoScrollSpeed=a,this._overflowTolerance=l,this.DS=o,this.HTMLNode=function(e){var t=document.createElement("div");return t.style.position="fixed",t.style.overflow="hidden",t.style.pointerEvents="none",t.style.zIndex="999999999999999999",t.classList.add(e),t}(s),this.DS.subscribe("Area:modified",this.updatePos),this.DS.subscribe("Interaction:init",this.start),this.DS.subscribe("Interaction:start",this.startAutoScroll),this.DS.subscribe("Interaction:end",(function(){i.updatePos(),i.stopAutoScroll()}))}return r(t,[{key:"isClicked",value:function(e){var t=this.DS.stores.PointerStore,r=e?t.getPointerPosition(e):t.initialVal;return E({left:r.x,top:r.y,right:r.x,bottom:r.y},this.rect)}},{key:"rect",get:function(){return this._rect?this._rect:this._rect=this.HTMLNode.getBoundingClientRect()}}]),t}(),R=function(){function t(r){var i=this,o=r.DS,s=r.multiSelectKeys,a=r.multiSelectMode;e(this,t),n(this,"_multiSelectMode",void 0),n(this,"_multiSelectKeys",void 0),n(this,"_currentValues",new Set),n(this,"_keyMapping",{control:"ctrlKey",shift:"shiftKey",meta:"metaKey"}),n(this,"init",(function(){document.addEventListener("keydown",i.keydown),document.addEventListener("keyup",i.keyup),window.addEventListener("blur",i.reset)})),n(this,"keydown",(function(e){var t=e.key.toLowerCase();i.DS.publish("KeyStore:down:pre",{event:e,key:t}),i._currentValues.add(t),i.DS.publish("KeyStore:down",{event:e,key:t})})),n(this,"keyup",(function(e){var t=e.key.toLowerCase();i.DS.publish("KeyStore:up:pre",{event:e,key:t}),i._currentValues.delete(t),i.DS.publish("KeyStore:up",{event:e,key:t})})),n(this,"stop",(function(){document.removeEventListener("keydown",i.keydown),document.removeEventListener("keyup",i.reset),window.removeEventListener("blur",i.reset),i.reset()})),n(this,"reset",(function(){return i._currentValues.clear()})),this.DS=o,this._multiSelectMode=a,this._multiSelectKeys=s.map((function(e){var t={ctrlKey:"Control",shiftKey:"Shift",metaKey:"Meta"}[e];return t?(console.warn("[DragSelect] ".concat(e,' is deprecated. Use "').concat(t,'" instead. Act Now!. See docs for more info')),t.toLowerCase()):e.toLowerCase()})),this.DS.subscribe("Interaction:init",this.init)}return r(t,[{key:"isMultiSelectKeyPressed",value:function(e){var t=this;return!!this._multiSelectMode||!!this.currentValues.some((function(e){return t._multiSelectKeys.includes(e)}))||!(!e||!this._multiSelectKeys.some((function(r){return e[t._keyMapping[r]]})))}},{key:"currentValues",get:function(){return Array.from(this._currentValues.values())}}]),t}(),B=function(){function t(r){var i=this,o=r.DS;e(this,t),n(this,"_isMouseInteraction",!1),n(this,"_initialValArea",void 0),n(this,"_currentValArea",void 0),n(this,"_lastValArea",void 0),n(this,"_initialVal",void 0),n(this,"_currentVal",void 0),n(this,"_lastVal",void 0),n(this,"_lastTouch",void 0),n(this,"init",(function(){document.addEventListener("mousemove",i.update),document.addEventListener("touchmove",i.update,{passive:!1})})),n(this,"getPointerPosition",(function(e){return function(e){var t=e.event;return{x:t.clientX,y:t.clientY}}({event:i._normalizedEvent(e)})})),n(this,"update",(function(e){e&&(i.DS.publish("PointerStore:updated:pre",{event:e}),i.currentVal=i.getPointerPosition(e),i._isMouseInteraction&&i.DS.publish("PointerStore:updated",{event:e}))})),n(this,"stop",(function(){document.removeEventListener("mousemove",i.update),document.removeEventListener("touchmove",i.update,{passive:!1}),setTimeout((function(){return i._isMouseInteraction=!1}),100)})),n(this,"reset",(function(e){e&&(i.currentVal=i.lastVal=i.getPointerPosition(e),i.stop(),i.init())})),this.DS=o,this.DS.subscribe("Interaction:init",this.init),this.DS.subscribe("Interaction:start",(function(e){var t=e.event;return i.start(t)})),this.DS.subscribe("Interaction:end",(function(e){var t=e.event;return i.reset(t)}))}return r(t,[{key:"start",value:function(e){e&&(this._isMouseInteraction=!0,this.currentVal=this.initialVal=this.getPointerPosition(e))}},{key:"_normalizedEvent",value:function(e){return"touches"in e&&"touchend"!==e.type&&(this._lastTouch=e),"touches"in e?this._lastTouch.touches[0]:e}},{key:"initialValArea",get:function(){return this._initialValArea?this._initialValArea:{x:0,y:0}}},{key:"currentValArea",get:function(){return this._currentValArea?this._currentValArea:{x:0,y:0}}},{key:"lastValArea",get:function(){return this._lastValArea?this._lastValArea:{x:0,y:0}}},{key:"initialVal",get:function(){return this._initialVal?this._initialVal:{x:0,y:0}},set:function(e){this._initialVal=e,this._initialValArea=e&&g(e,"-",g(b(this.DS.Area.rect),"+",b(this.DS.Area.computedBorder)))}},{key:"currentVal",get:function(){return this._currentVal?this._currentVal:{x:0,y:0}},set:function(e){this._currentVal=e,this._currentValArea=e&&g(e,"-",g(b(this.DS.Area.rect),"+",b(this.DS.Area.computedBorder)))}},{key:"lastVal",get:function(){return this._lastVal?this._lastVal:{x:0,y:0}},set:function(e){this._lastVal=e,this._lastValArea=e&&g(e,"-",g(b(this.DS.Area.rect),"+",b(this.DS.Area.computedBorder)))}}]),t}(),U=function(){function t(r){var i=this,o=r.DS,s=r.areaElement,a=r.zoom;e(this,t),n(this,"_initialVal",void 0),n(this,"_currentVal",void 0),n(this,"_areaElement",void 0),n(this,"_canScroll",void 0),n(this,"init",(function(){return i._areaElement.addEventListener("scroll",i.update)})),n(this,"start",(function(){i._currentVal=i._initialVal=D(i._areaElement),i._areaElement.addEventListener("scroll",i.update)})),n(this,"update",(function(){return i._currentVal=D(i._areaElement)})),n(this,"stop",(function(){i._areaElement.removeEventListener("scroll",i.update),i._initialVal={x:0,y:0},i._canScroll=null})),n(this,"reset",(function(){i.stop(),i.start()})),this._areaElement=s,this.DS=o,this.zoom=a,this.DS.subscribe("Interaction:init",this.init),this.DS.subscribe("Interaction:start",(function(){return i.start()})),this.DS.subscribe("Interaction:end",(function(){return i.reset()}))}return r(t,[{key:"canScroll",get:function(){return"boolean"==typeof this._canScroll?this._canScroll:this._canScroll=(e=this._areaElement,!!((t=D(e)).x||t.y||(e instanceof HTMLDocument?e.body?e.body.scrollTop=1:e.documentElement.scrollTop=1:e.scrollTop=1)));var e,t}},{key:"scrollAmount",get:function(){var e,t=g(this.currentVal,"-",this.initialVal),r={x:e=this.zoom,y:e},n=g(g(t,"*",r),"-",t);return{x:t.x+n.x,y:t.y+n.y}}},{key:"initialVal",get:function(){return this._initialVal?this._initialVal:{x:0,y:0}}},{key:"currentVal",get:function(){return this._currentVal||(this._currentVal=D(this._areaElement)),this._currentVal}}]),t}();return function(){function t(r){var i=this,o=r.area,s=void 0===o?document:o,a=r.selectables,l=void 0===a?[]:a,c=r.autoScrollSpeed,u=void 0===c?5:c,d=r.overflowTolerance,h=void 0===d?{x:25,y:25}:d,f=r.zoom,v=void 0===f?1:f,S=r.customStyles,p=void 0!==S&&S,m=r.multiSelectMode,g=void 0!==m&&m,b=r.multiSelectToggling,y=void 0===b||b,_=r.multiSelectKeys,D=void 0===_?["Control","Shift","Meta"]:_,P=r.selector,w=void 0===P?void 0:P,k=r.draggability,E=void 0===k||k,x=r.immediateDrag,I=void 0===x||x,C=r.keyboardDrag,L=void 0===C||C,W=r.dragKeys,F=r.keyboardDragSpeed,Z=void 0===F?10:F,X=r.useTransform,Y=void 0===X||X,G=r.hoverClass,$=void 0===G?"ds-hover":G,q=r.selectableClass,J=void 0===q?"ds-selectable":q,Q=r.selectedClass,ee=void 0===Q?"ds-selected":Q,te=r.selectorClass,re=void 0===te?"ds-selector":te,ne=r.selectorAreaClass,ie=void 0===ne?"ds-selector-area":ne,oe=r.callback,se=r.onDragMove,ae=r.onDragStartBegin,le=r.onDragStart,ce=r.onElementSelect,ue=r.onElementUnselect;e(this,t),n(this,"continue",!1),n(this,"start",(function(){i.stopped=!1,i.Interaction.init()})),n(this,"break",(function(){return i.continue=!0})),n(this,"getSelection",(function(){return i.SelectedSet.elements})),n(this,"getSelectables",(function(){return i.SelectableSet.elements})),n(this,"getInitialCursorPosition",(function(){return i.stores.PointerStore.initialVal})),n(this,"getCurrentCursorPosition",(function(){return i.stores.PointerStore.currentVal})),n(this,"getPreviousCursorPosition",(function(){return i.stores.PointerStore.lastVal})),n(this,"getInitialCursorPositionArea",(function(){return i.stores.PointerStore.initialValArea})),n(this,"getCurrentCursorPositionArea",(function(){return i.stores.PointerStore.currentValArea})),n(this,"getPreviousCursorPositionArea",(function(){return i.stores.PointerStore.lastValArea})),n(this,"isMultiSelect",(function(e){return i.stores.KeyStore.isMultiSelectKeyPressed(e)})),n(this,"isDragging",(function(){return i.Interaction.isDragging})),this.PubSub=new M({DS:this}),this.subscribe=this.PubSub.subscribe,this.unsubscribe=this.PubSub.unsubscribe,this.publish=this.PubSub.publish,this._callbacksTemp({callback:oe,onDragMove:se,onDragStart:le,onDragStartBegin:ae,onElementSelect:ce,onElementUnselect:ue}),this.stores={PointerStore:new B({DS:this}),ScrollStore:new U({DS:this,areaElement:s,zoom:v}),KeyStore:new R({DS:this,multiSelectKeys:D,multiSelectMode:g})},this.Area=new T({area:s,PS:this.PubSub,zoom:v}),this.Selector=new z({DS:this,selector:w,selectorClass:re,customStyles:p}),this.SelectorArea=new H({DS:this,selectorAreaClass:ie,autoScrollSpeed:u,overflowTolerance:h}),this.SelectableSet=new K({elements:l,DS:this,className:J,hoverClassName:$,useTransform:Y,draggability:E}),this.SelectedSet=new O({DS:this,className:ee}),this.Selection=new j({DS:this,hoverClassName:$,multiSelectToggling:y}),this.Drag=new V({DS:this,draggability:E,useTransform:Y,keyboardDrag:L,dragKeys:Object.assign({up:["ArrowUp"],down:["ArrowDown"],left:["ArrowLeft"],right:["ArrowRight"]},W),zoom:v,keyboardDragSpeed:Z}),this.Interaction=new N({areaElement:s,DS:this,draggability:E,immediateDrag:I}),A({subscribe:this.subscribe,publish:this.publish,SelectedSet:this.SelectedSet,Interaction:this.Interaction}),this.subscribe("Interaction:end",(function(){return i.continue=!1})),this.start()}return r(t,[{key:"_callbacksTemp",value:function(e){var t=e.callback,r=e.onDragMove,n=e.onDragStart,i=e.onDragStartBegin,o=e.onElementSelect,s=e.onElementUnselect,a=function(e,t){return console.warn("[DragSelect] ".concat(e,' is deprecated. Use DragSelect.subscribe("').concat(t,'", (callbackObject) => {}) instead. Act Now! See docs for more info'))};t&&(a("callback","callback"),this.subscribe("callback",(function(e){var r=e.items,n=(e.item,e.event);return t(r,n)}))),r&&(a("onDragMove","dragmove"),this.subscribe("dragmove",(function(e){e.items,e.item;var t=e.event;return r(t)}))),n&&(a("onDragStart","dragstart"),this.subscribe("dragstart",(function(e){e.items,e.item;var t=e.event;return n(t)}))),i&&(a("onDragStartBegin","dragstart"),this.subscribe("dragstart",(function(e){e.items,e.item;var t=e.event;return i(t)}))),o&&(a("onElementSelect","elementselect"),this.subscribe("elementselect",(function(e){e.items;var t=e.item,r=e.event;return o(t,r)}))),s&&(a("onElementUnselect","elementunselect"),this.subscribe("elementunselect",(function(e){e.items;var t=e.item,r=e.event;return s(t,r)})))}},{key:"stop",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];r&&this.publish("callback",{items:this.getSelection()}),this.Interaction.stop(),this.Area.stop(),this.Drag.stop(),this.Selector.stop(),this.SelectorArea.stop(e),this.stores.KeyStore.stop(),this.stores.PointerStore.stop(),this.stores.ScrollStore.stop(),e&&this.SelectableSet.clear(),t&&this.SelectedSet.clear(),this.stopped=!0}},{key:"addSelection",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.SelectedSet.addAll(C(e)),r||this.addSelectables(e),t&&this.PubSub.publish("callback",{items:this.getSelection()}),this.getSelection()}},{key:"removeSelection",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.SelectedSet.deleteAll(C(e)),r&&this.removeSelectables(e),t&&this.PubSub.publish("callback",{items:this.getSelection()}),this.getSelection()}},{key:"toggleSelection",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return C(e).forEach((function(i){return t.SelectedSet.has(i)?t.removeSelection(e,r,n):t.addSelection(e,r,n)})),r&&this.PubSub.publish("callback",{items:this.getSelection()}),this.getSelection()}},{key:"setSelection",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.clearSelection(),this.addSelection(e,t,r),this.getSelection()}},{key:"clearSelection",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.SelectedSet.clear(),e&&this.PubSub.publish("callback",{items:this.getSelection()}),this.getSelection()}},{key:"addSelectables",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=C(e);return this.SelectableSet.addAll(r),t&&this.SelectedSet.addAll(r),e}},{key:"setSelectables",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.removeSelectables(e,t),this.addSelectables(e,r)}},{key:"removeSelectables",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.SelectableSet.deleteAll(C(e)),t&&this.removeSelection(e),e}},{key:"getCursorPositionDifference",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.warn("[DragSelect] Using .getCursorPositionDifference is deprecated. Calculate yourself instead. i.e. `.getCurrentCursorPosition().x - .getInitialCursorPosition().x`");var r=t?this.getCurrentCursorPositionArea():this.getCurrentCursorPosition(),n=e?t?this.getPreviousCursorPositionArea():this.getPreviousCursorPosition():t?this.getInitialCursorPositionArea():this.getInitialCursorPosition();return g(r,"-",n)}}]),t}()}));
